<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connections Map</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet"/>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background: #0d1117;
            color: #e6edf3;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            padding: 16px 24px;
            background: #161b22;
            border-bottom: 1px solid #30363d;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }
        header h1 {
            font-size: 1.1em;
            font-weight: 700;
            color: #e6edf3;
            letter-spacing: 0.02em;
        }
        header a {
            color: #58a6ff;
            text-decoration: none;
            font-size: 0.9em;
        }
        .legend {
            display: flex;
            gap: 20px;
            font-size: 0.82em;
            color: #8b949e;
        }
        .legend-item { display: flex; align-items: center; gap: 6px; }
        .legend-dot {
            width: 12px; height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        #graph-container {
            flex: 1;
            position: relative;
        }
        #graph { width: 100%; height: 100%; }
        #info-panel {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 280px;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 16px;
            display: none;
            z-index: 10;
        }
        #info-panel h2 {
            font-size: 1em;
            color: #e6edf3;
            margin-bottom: 4px;
        }
        #info-type {
            font-size: 0.8em;
            color: #8b949e;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        #info-articles { list-style: none; }
        #info-articles li { margin-bottom: 6px; }
        #info-articles a {
            color: #58a6ff;
            text-decoration: none;
            font-size: 0.88em;
            line-height: 1.4;
        }
        #info-articles a:hover { text-decoration: underline; }
        #info-close {
            position: absolute;
            top: 10px; right: 12px;
            cursor: pointer;
            color: #8b949e;
            font-size: 1.2em;
            line-height: 1;
            background: none;
            border: none;
            color: #8b949e;
        }
        #info-close:hover { color: #e6edf3; }
        #article-count {
            font-size: 0.82em;
            color: #8b949e;
        }
        footer {
            padding: 10px 24px;
            background: #161b22;
            border-top: 1px solid #30363d;
            font-size: 0.78em;
            color: #484f58;
            flex-shrink: 0;
        }
    </style>
</head>
<body>
<header>
    <h1>Connections Map</h1>
    <div class="legend">
        <div class="legend-item"><div class="legend-dot" style="background:#e05c5c"></div>Person</div>
        <div class="legend-item"><div class="legend-dot" style="background:#4a9eff"></div>Company / Org</div>
        <div class="legend-item"><div class="legend-dot" style="background:#3dba76"></div>Government</div>
        <div class="legend-item"><div class="legend-dot" style="background:#c7a33a"></div>Other</div>
    </div>
    <a href="index.html">Back to Index</a>
</header>
<div id="graph-container">
    <div id="graph"></div>
    <div id="info-panel">
        <button id="info-close" onclick="closePanel()">x</button>
        <h2 id="info-name"></h2>
        <div id="info-type"></div>
        <ul id="info-articles"></ul>
    </div>
</div>
<footer>Updated: February 13, 2026 &nbsp;|&nbsp; 7 entities &nbsp;|&nbsp; 7 connections &nbsp;|&nbsp; 1 articles</footer>

<script>
const GRAPH_DATA = {"nodes": [{"id": 0, "label": "Karl Malenfant", "type": "person", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}, {"id": 1, "label": "Denis Gallant", "type": "person", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}, {"id": 2, "label": "SAAQ", "type": "government", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}, {"id": 3, "label": "IBM/LGS", "type": "company", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}, {"id": 4, "label": "UPAC", "type": "government", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}, {"id": 5, "label": "Francois Dagenais", "type": "person", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}, {"id": 6, "label": "CAQ Government", "type": "government", "articles": [{"title": "SAAQclic: The Gallant Report and What Comes Next", "path": "canada/quebec/saaqclic/saaqclic-gallant-report.html"}], "article_count": 1}], "edges": [{"from": 0, "to": 2, "weight": 1}, {"from": 3, "to": 0, "weight": 1}, {"from": 3, "to": 2, "weight": 1}, {"from": 5, "to": 4, "weight": 1}, {"from": 5, "to": 2, "weight": 1}, {"from": 1, "to": 2, "weight": 1}, {"from": 6, "to": 2, "weight": 1}]};

const TYPE_COLORS = {
    person:     { background: "#e05c5c", border: "#c43c3c", highlight: { background: "#ff7f7f", border: "#e05c5c" } },
    company:    { background: "#4a9eff", border: "#2a7edd", highlight: { background: "#74b9ff", border: "#4a9eff" } },
    government: { background: "#3dba76", border: "#2a9457", highlight: { background: "#55d68c", border: "#3dba76" } },
    other:      { background: "#c7a33a", border: "#a0801e", highlight: { background: "#e0bb50", border: "#c7a33a" } }
};

function getColor(type) {
    return TYPE_COLORS[type] || TYPE_COLORS.other;
}

const nodes = new vis.DataSet(
    GRAPH_DATA.nodes.map(n => ({
        id: n.id,
        label: n.label,
        color: getColor(n.type),
        font: { color: "#e6edf3", size: 13, face: "Arial" },
        borderWidth: 2,
        size: Math.min(10 + (n.article_count * 6), 40),
        title: n.label + " (" + n.article_count + " article" + (n.article_count !== 1 ? "s" : "") + ")"
    }))
);

const edges = new vis.DataSet(
    GRAPH_DATA.edges.map(e => ({
        from: e.from,
        to: e.to,
        width: Math.min(1 + e.weight, 6),
        color: { color: "#30363d", highlight: "#58a6ff", opacity: 0.8 },
        smooth: { type: "curvedCW", roundness: 0.1 }
    }))
);

const container = document.getElementById("graph");
const network = new vis.Network(container, { nodes, edges }, {
    physics: {
        stabilization: { iterations: 150 },
        barnesHut: {
            gravitationalConstant: -3000,
            centralGravity: 0.3,
            springLength: 180,
            springConstant: 0.04,
            damping: 0.2
        }
    },
    interaction: {
        hover: true,
        tooltipDelay: 200,
        zoomView: true,
        dragView: true
    },
    nodes: {
        shape: "dot",
        scaling: { min: 10, max: 40 }
    },
    edges: {
        arrows: { to: { enabled: false } }
    }
});

network.on("click", function(params) {
    if (params.nodes.length > 0) {
        const nodeId = params.nodes[0];
        const node = GRAPH_DATA.nodes.find(n => n.id === nodeId);
        if (node) showPanel(node);
    } else {
        closePanel();
    }
});

function showPanel(node) {
    document.getElementById("info-name").textContent = node.label;
    document.getElementById("info-type").textContent = node.type;
    const ul = document.getElementById("info-articles");
    ul.innerHTML = "";
    node.articles.forEach(a => {
        const li = document.createElement("li");
        const link = document.createElement("a");
        link.href = "../" + a.path;
        link.textContent = a.title;
        li.appendChild(link);
        ul.appendChild(li);
    });
    document.getElementById("info-panel").style.display = "block";
}

function closePanel() {
    document.getElementById("info-panel").style.display = "none";
}
</script>
</body>
</html>